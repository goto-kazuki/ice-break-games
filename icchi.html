<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>ã¿ã‚“ãªã§ä¸€è‡´ã‚²ãƒ¼ãƒ  - ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯ã‚²ãƒ¼ãƒ ã²ã‚ã°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    :root { --main-color: #66CCFF; --accent-color: #FFC107; --sub-accent: #333366; --bg-light: #F0F8FF; }
    body { margin: 0; font-family: 'M PLUS Rounded 1c', sans-serif; background: var(--bg-light); color: #333; line-height: 1.6; }
    
    header { background: linear-gradient(135deg, #fff, #F0F8FF); padding: 30px 20px; text-align: center; border-bottom: 4px solid var(--main-color); border-radius: 0 0 40px 40px; margin-bottom: 40px; }
    .header-icon { width: 100px; height: 100px; object-fit: contain; margin-bottom: 10px; }
    .back-link { display: inline-block; margin-bottom: 20px; text-decoration: none; color: var(--sub-accent); font-weight: 700; padding: 8px 16px; background: #fff; border-radius: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }

    main { max-width: 800px; margin: 0 auto; padding: 0 20px 60px; }
    .panel { background: #fff; border-radius: 20px; padding: 30px; margin-bottom: 30px; box-shadow: 0 10px 25px rgba(102, 204, 255, 0.15); }
    h2 { color: var(--sub-accent); border-left: 6px solid var(--accent-color); padding-left: 12px; }

    .btn { display: inline-flex; justify-content: center; padding: 12px 24px; border-radius: 50px; border: none; font-weight: 900; cursor: pointer; }
    .btn-primary { background: linear-gradient(135deg, #FFC107, #FFD54F); color: #333; box-shadow: 0 4px 0 #DDA000; }
    .btn-secondary { background: #fff; border: 2px solid var(--main-color); color: var(--main-color); }
    
    input { width: 100%; padding: 12px; border-radius: 12px; border: 2px solid #eee; font-size: 1rem; }
    .topic-card { padding: 30px; background: #FFF8E1; border: 3px dashed var(--accent-color); text-align: center; border-radius: 20px; margin-top: 20px; }
    
    footer { text-align: center; padding: 40px 20px; background: var(--sub-accent); color: #999; }
    .footer-logo { width: 100px; margin-bottom: 10px; border-radius: 12px; }
  </style>
</head>
<body>
  <header>
    <a href="menu.html" class="back-link">â—€ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹</a><br>
    <!-- ã“ã“ã« icchi.png ã‚’è¡¨ç¤º -->
    <img src="icchi.png" alt="ã‚¢ã‚¤ã‚³ãƒ³" class="header-icon">
    <h1 style="margin:10px 0; color:var(--sub-accent); font-weight:900;">ã¿ã‚“ãªã§ä¸€è‡´ã‚²ãƒ¼ãƒ </h1>
    <p style="color:#666; font-weight:700;">å›ç­”ä¸€è‡´ã§ç››ã‚Šä¸ŠãŒã‚‹ï¼</p>
  </header>

  <main>
    <section class="panel">
      <h2>ğŸ“Œ ã“ã®ã‚²ãƒ¼ãƒ ã«ã¤ã„ã¦</h2>
      <p>ãŠé¡Œã«å¯¾ã™ã‚‹å›ç­”ãŒå…¨å“¡ä¸€è‡´ã™ã‚‹ã¾ã§ç¹°ã‚Šè¿”ã™ã‚²ãƒ¼ãƒ ã€‚ä¸€è‡´ã—ãªãã¦ã‚‚ã€Œãªãœãã†æ€ã£ãŸï¼Ÿã€ã§ä¼šè©±ãŒåºƒãŒã‚Šã€ä¾¡å€¤è¦³ã®å…±æœ‰ã«ã¤ãªãŒã‚Šã¾ã™ã€‚</p>
    </section>

    <section class="panel">
      <h2>â‘  äººæ•°ã¨ã‚ã åã‚’ç™»éŒ²</h2>
      <div style="display:flex; gap:15px; margin-bottom:15px;">
        <div style="flex:1"><label>äººæ•°</label><input type="number" id="player-count" min="2" max="12" value="4"></div>
        <button class="btn btn-primary" id="init-players-btn" style="align-self:flex-end;">æ ä½œæˆ</button>
      </div>
      <p id="status-text" style="color:#666; font-size:0.9rem;">ã¾ã æ ã¯ä½œã‚‰ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>

      <div id="nickname-area" style="display:none; margin-top:20px; padding:20px; background:#F0F8FF; border-radius:15px;">
        <label>ã‚ã å</label>
        <div style="display:flex; gap:10px; margin-top:5px;">
          <!-- ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’ã€Œä¾‹ï¼šã—ã‚‚ã—ã‚…ã‚“ã€ã«å¤‰æ›´ -->
          <input type="text" id="nickname-input" placeholder="ä¾‹ï¼šã—ã‚‚ã—ã‚…ã‚“">
          <button class="btn btn-secondary" id="add-nickname-btn">ç™»éŒ²</button>
        </div>
      </div>
      <ul id="player-list" style="margin-top:20px; padding-left:20px; font-weight:700; color:#555;"></ul>
    </section>

    <section class="panel">
      <h2>â‘¡ ãŠé¡Œã‚’æ±ºã‚ã‚‹</h2>
      <div style="text-align:center;">
        <button class="btn btn-primary" id="random-topic-btn">ãŠé¡Œã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«è¡¨ç¤º</button>
      </div>
      <div class="topic-card" id="topic-card" style="display:none;">
        <div id="topic-main" style="font-size:1.6rem; font-weight:900; color:var(--sub-accent);"></div>
        <div id="topic-detail" style="margin-top:10px; color:#666;"></div>
      </div>
    </section>

    <section class="panel">
      <h2>â‘¢ å›ç­”å…¥åŠ›</h2>
      <div id="inputs-area"></div>
      <div style="text-align:center; margin-top:30px;">
        <button class="btn btn-primary" id="submit-btn" disabled>å…¨å“¡å…¬é–‹ï¼</button>
      </div>
    </section>

    <section class="panel" id="result-panel" style="display:none;">
      <h2>çµæœç™ºè¡¨</h2>
      <div id="result-content"></div>
      <div style="margin-top:20px; text-align:center;">
        <button class="btn btn-primary" id="retry-btn">ã‚‚ã†ä¸€åº¦</button>
      </div>
    </section>
  </main>

  <footer>
    <img src="team-logo.png" alt="BigStone ãƒãƒ¼ãƒ ãƒ­ã‚´" class="footer-logo">
    <div style="color:#fff;">Â© 2025 ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯ã‚²ãƒ¼ãƒ ã²ã‚ã° | BigStone</div>
  </footer>

  <script>
    /* ç°¡æ˜“ãƒ­ã‚¸ãƒƒã‚¯ */
    const topics = [
      { main: "å¥½ããªãŠã‚„ã¤", detail: "ä¾‹ï¼šãƒãƒ§ã‚³ / ãƒãƒ†ãƒ / ã‚¬ãƒ " },
      { main: "æœä¸€ç•ªã«é£²ã¿ãŸã„ãƒ‰ãƒªãƒ³ã‚¯", detail: "ä¾‹ï¼šã‚³ãƒ¼ãƒ’ãƒ¼ / ç·‘èŒ¶ / ç‰›ä¹³" },
      { main: "å¥½ããªå­£ç¯€ã®ã‚¤ãƒ™ãƒ³ãƒˆ", detail: "ä¾‹ï¼šèŠ±è¦‹ / æµ· / ç´…è‘‰" }
    ];
    let players = [], targetCount = 0;
    
    document.getElementById('init-players-btn').onclick = () => {
        targetCount = Number(document.getElementById('player-count').value);
        players = []; document.getElementById('player-list').innerHTML = '';
        document.getElementById('nickname-area').style.display = 'block';
        document.getElementById('status-text').textContent = `ã‚ã¨ ${targetCount} äººç™»éŒ²ã—ã¦ãã ã•ã„ã€‚`;
    };

    document.getElementById('add-nickname-btn').onclick = () => {
        if(players.length >= targetCount) return;
        const name = document.getElementById('nickname-input').value.trim();
        if(!name) return;
        players.push({ name, answer: '', locked: false });
        const li = document.createElement('li'); li.textContent = name;
        document.getElementById('player-list').appendChild(li);
        document.getElementById('nickname-input').value = '';
        
        if(players.length === targetCount) {
            document.getElementById('nickname-area').style.display = 'none';
            document.getElementById('status-text').textContent = 'å…¨å“¡ç™»éŒ²å®Œäº†ï¼ãŠé¡Œã‚’æ±ºã‚ã¦ãã ã•ã„ã€‚';
            setupInputs();
        } else {
            document.getElementById('status-text').textContent = `ç™»éŒ²æ¸ˆã¿ï¼š${players.length} / ${targetCount} äºº`;
        }
    };

    document.getElementById('random-topic-btn').onclick = () => {
        const t = topics[Math.floor(Math.random()*topics.length)];
        document.getElementById('topic-card').style.display = 'block';
        document.getElementById('topic-main').textContent = t.main;
        document.getElementById('topic-detail').textContent = t.detail;
    };

    function setupInputs() {
        const area = document.getElementById('inputs-area'); area.innerHTML = '';
        players.forEach((p, i) => {
            const div = document.createElement('div');
            div.style.marginBottom = '10px';
            div.innerHTML = `<label style="font-weight:700; display:block;">${p.name}</label><div style="display:flex; gap:5px;"><input type="text" id="ans-${i}"><button class="btn btn-secondary" onclick="lock(${i})">ãƒ­ãƒƒã‚¯</button></div>`;
            area.appendChild(div);
        });
    }

    window.lock = (i) => {
        const inp = document.getElementById(`ans-${i}`);
        if(!inp.value) return;
        players[i].answer = inp.value;
        players[i].locked = true;
        inp.parentElement.innerHTML = '<span style="color:green; font-weight:700; padding:10px;">ãƒ­ãƒƒã‚¯å®Œäº†ï¼ˆéè¡¨ç¤ºï¼‰</span>';
        if(players.every(p => p.locked)) document.getElementById('submit-btn').disabled = false;
    };

    document.getElementById('submit-btn').onclick = () => {
        let html = '';
        const first = players[0].answer;
        const allMatch = players.every(p => p.answer === first);
        
        players.forEach(p => {
            html += `<div style="border-bottom:1px solid #eee; padding:10px; font-weight:700;">${p.name}: ${p.answer}</div>`;
        });
        
        const title = allMatch ? '<h3 style="color:#E91E63; text-align:center;">ğŸ‰ å…¨å“¡ä¸€è‡´ï¼æˆåŠŸï¼ ğŸ‰</h3>' : '<h3 style="color:#333; text-align:center;">æ®‹å¿µï¼ä¸€è‡´ãªã‚‰ãšâ€¦</h3>';
        
        document.getElementById('result-content').innerHTML = title + html;
        document.getElementById('result-panel').style.display = 'block';
    };

    document.getElementById('retry-btn').onclick = () => {
        players.forEach(p => { p.answer = ''; p.locked = false; });
        setupInputs();
        document.getElementById('result-panel').style.display = 'none';
        document.getElementById('submit-btn').disabled = true;
    };
  </script>
</body>
</html>
