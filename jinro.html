<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>è‡ªå·±ç´¹ä»‹äººç‹¼ - ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯ã‚²ãƒ¼ãƒ ã²ã‚ã°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    :root {
      --main-color: #66CCFF;
      --accent-color: #FFC107;
      --sub-accent: #333366;
      --bg-light: #F0F8FF;
      --shadow-card: 0 10px 25px rgba(102, 204, 255, 0.15);
    }
    body { margin: 0; font-family: 'M PLUS Rounded 1c', sans-serif; background: var(--bg-light); color: #333; line-height: 1.6; }
    
    header {
      background: linear-gradient(135deg, #fff, #F0F8FF);
      padding: 30px 20px; text-align: center;
      border-bottom: 4px solid var(--main-color);
      border-bottom-left-radius: 40px; border-bottom-right-radius: 40px;
    }
    .header-icon { width: 80px; height: 80px; object-fit: contain; margin-bottom: 10px; }
    h1 { margin: 10px 0; color: var(--sub-accent); font-weight: 900; }
    
    main { max-width: 800px; margin: 30px auto; padding: 0 20px 60px; }
    .panel { background: #fff; padding: 30px; border-radius: 20px; box-shadow: var(--shadow-card); margin-bottom: 30px; }
    .panel h2 { color: var(--sub-accent); border-left: 6px solid var(--accent-color); padding-left: 10px; font-size: 1.3rem; }

    .btn { padding: 12px 24px; border-radius: 50px; border: none; font-weight: 900; cursor: pointer; transition: transform 0.2s; font-size: 1rem; }
    .btn-primary { background: linear-gradient(135deg, #66CCFF, #33A8FF); color: #fff; box-shadow: 0 4px 10px rgba(102,204,255,0.4); }
    .btn-primary:hover { transform: translateY(-2px); }
    .btn-outline { background: #fff; color: var(--main-color); border: 2px solid var(--main-color); }
    
    input[type="text"], input[type="number"] { padding: 12px; border: 2px solid #eee; border-radius: 10px; width: 100%; font-size: 1rem; }

    /* ãƒ•ãƒƒã‚¿ãƒ¼ */
    footer {
      text-align: center;
      padding: 40px 20px;
      color: #999;
      font-size: 0.85rem;
      background: var(--sub-accent);
    }
    .footer-logo {
      width: 100px;
      margin-bottom: 10px;
      border-radius: 12px;
    }
  </style>
</head>
<body>
  <header>
    <a href="menu.html" style="display:inline-block; margin-bottom:10px; text-decoration:none; color:var(--sub-accent); font-weight:700;">â—€ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹</a>
    <br>
    <img src="wolf.png" alt="äººç‹¼" class="header-icon">
    <h1>è‡ªå·±ç´¹ä»‹äººç‹¼</h1>
    <p style="color:var(--text-main); font-weight:700;">å¿ƒç†æˆ¦ã§äº’ã„ã®ç´ é¡”ãŒè¦‹ãˆã‚‹ï¼</p>
  </header>

  <main>
    <section class="panel">
      <h2>ğŸº ã“ã®ã‚²ãƒ¼ãƒ ã«ã¤ã„ã¦</h2>
      <p>è‡ªå·±ç´¹ä»‹ã®ä¸­ã«ã€Œ1ã¤ã ã‘å˜˜ã€ã‚’æ··ãœã¦ã€èª°ãŒäººç‹¼ã‹ã‚’å½“ã¦ã‚‹ã‚²ãƒ¼ãƒ ã€‚å˜˜ã‚’è€ƒãˆã‚‹éç¨‹ã§æœ¬å½“ã®æƒ…å ±ã‚‚è‡ªç„¶ã¨å…±æœ‰ã•ã‚Œã€ç›¸æ‰‹ã®æ„å¤–ãªä¸€é¢ã‚’ç™ºè¦‹ã§ãã¾ã™ã€‚</p>
      <p style="margin-top:15px; background:#E3F2FD; padding:10px; border-radius:10px;">
        <strong>ä¾‹ï¼š</strong>ã€Œè¶£å‘³ã¯æ˜ ç”»ã€å‡ºèº«ã¯å¤§é˜ªã€å¥½ããªé£Ÿã¹ç‰©ã¯ã‚«ãƒ¬ãƒ¼ï¼ˆ1ã¤å˜˜ï¼‰ã€
      </p>
    </section>

    <section class="panel">
      <h2>â‘  äººæ•°ã¨ã‚ã åã‚’ç™»éŒ²</h2>
      <div style="display:flex; gap:10px; margin-bottom:15px; align-items:flex-end;">
        <div style="flex:1">
          <label style="font-weight:700; color:var(--sub-accent);">äººæ•°ï¼ˆ4ã€œ12ï¼‰</label>
          <input id="player-count" type="number" min="4" max="12" value="6">
        </div>
        <button id="setup-btn" class="btn btn-primary">è¨­å®šã™ã‚‹</button>
      </div>

      <div id="name-area" style="display:none; margin-top:20px; padding:20px; background:#F0F8FF; border-radius:15px;">
        <label style="font-weight:700;">ã‚ã åã‚’ç™»éŒ²</label>
        <div style="display:flex; gap:10px; margin-top:5px;">
          <input id="name-input" type="text" placeholder="ä¾‹ï¼šã—ã‚‚ã—ã‚…ã‚“">
          <button id="add-name-btn" class="btn btn-outline">è¿½åŠ </button>
        </div>
        <ul id="name-list" style="margin-top:10px; font-weight:700; color:#555;"></ul>
      </div>

      <div style="margin-top:20px; text-align:center;">
        <button id="deal-roles-btn" class="btn btn-primary" style="display:none;">å½¹è·ã‚’é…ã‚‹ï¼</button>
        <button id="reset-game-btn" class="btn btn-outline" style="display:none; margin-left:10px;">ãƒªã‚»ãƒƒãƒˆ</button>
      </div>

      <div id="role-display" style="display:none; margin-top:20px; padding:30px; border-radius:15px; background:#FFF8E1; border: 3px dashed var(--accent-color); text-align:center;">
        <div id="role-text" style="font-size:1.4rem; font-weight:900; color:#333; margin-bottom:20px;"></div>
        <button id="next-role-btn" class="btn btn-primary">æ¬¡ã®äººã¸ï¼ˆç¢ºèªï¼‰</button>
        <button id="done-roles-btn" class="btn btn-outline" style="display:none;">é…å¸ƒå®Œäº†</button>
      </div>
    </section>

    <section class="panel" style="display:none" id="voting-area">
      <h2>ğŸ—³ æŠ•ç¥¨ã‚¿ã‚¤ãƒ </h2>
      <p>è­°è«–ãŒçµ‚ã‚ã£ãŸã‚‰ã€ä¸€ç•ªæ€ªã—ã„äººã«æŠ•ç¥¨ã—ã‚ˆã†ï¼</p>
      <div id="vote-controls" style="margin-top:15px; display:flex; gap:10px;"></div>
    </section>
  </main>

  <footer>
    <img src="team-logo.png" alt="BigStone ãƒãƒ¼ãƒ ãƒ­ã‚´" class="footer-logo">
    <div style="color:#fff;">Â© 2025 ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯ã‚²ãƒ¼ãƒ ã²ã‚ã° | BigStone</div>
  </footer>

  <script>
    const setupBtn = document.getElementById('setup-btn');
    const playerCountInput = document.getElementById('player-count');
    const nameArea = document.getElementById('name-area');
    const nameInput = document.getElementById('name-input');
    const addNameBtn = document.getElementById('add-name-btn');
    const nameList = document.getElementById('name-list');
    const dealRolesBtn = document.getElementById('deal-roles-btn');
    const resetGameBtn = document.getElementById('reset-game-btn');
    const roleDisplay = document.getElementById('role-display');
    const roleText = document.getElementById('role-text');
    const nextRoleBtn = document.getElementById('next-role-btn');
    const doneRolesBtn = document.getElementById('done-roles-btn');
    const votingArea = document.getElementById('voting-area');
    const voteControls = document.getElementById('vote-controls');

    let players = [];
    let roles = [];
    let currentRoleIndex = 0;

    setupBtn.addEventListener('click', ()=>{
      const c = Number(playerCountInput.value);
      if(!c || c<4) return alert('æœ€ä½4äººã§éŠã‚“ã§ãã ã•ã„ã€‚');
      players = []; nameList.innerHTML=''; nameArea.style.display='block'; dealRolesBtn.style.display='none'; resetGameBtn.style.display='none'; roleDisplay.style.display='none'; votingArea.style.display='none';
    });

    addNameBtn.addEventListener('click', ()=>{
      const n = nameInput.value.trim(); if(!n) return alert('ã‚ã åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
      if(players.includes(n)) return alert('åŒã˜åå‰ã¯ç™»éŒ²ã§ãã¾ã›ã‚“ã€‚');
      players.push(n); const li=document.createElement('li'); li.textContent=`${players.length}. ${n}`; nameList.appendChild(li); nameInput.value='';
      if(players.length === Number(playerCountInput.value)){ dealRolesBtn.style.display='inline-flex'; resetGameBtn.style.display='inline-flex'; }
    });

    resetGameBtn.addEventListener('click', ()=>{ if(!confirm('ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) return; players=[]; nameList.innerHTML=''; dealRolesBtn.style.display='none'; resetGameBtn.style.display='none'; roleDisplay.style.display='none'; votingArea.style.display='none'; });

    function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]];} return a; }
    function buildRoles(count){ const arr=[]; const werewolfCount = Math.max(1, Math.floor(count/4)); for(let i=0;i<werewolfCount;i++) arr.push('äººç‹¼'); if(count>=5) arr.push('å ã„å¸«'); while(arr.length<count) arr.push('æ‘äºº'); return shuffle(arr); }

    dealRolesBtn.addEventListener('click', ()=>{
      if(players.length !== Number(playerCountInput.value)) return alert('å…¨å“¡ã®ã‚ã åç™»éŒ²ã‚’å®Œäº†ã—ã¦ãã ã•ã„ã€‚');
      roles = buildRoles(players.length); roles = shuffle(roles); currentRoleIndex = 0; roleDisplay.style.display='block'; showNextRolePrompt(); prepareVoting();
    });

    function showNextRolePrompt(){ roleText.textContent='ã“ã®ç”»é¢ã‚’1äººãšã¤è¦‹ã¦ç¢ºèªã—ã¦ãã ã•ã„'; nextRoleBtn.style.display='inline-flex'; doneRolesBtn.style.display='none'; nextRoleBtn.textContent = 'ç¢ºèªã™ã‚‹'; }

    nextRoleBtn.addEventListener('click', ()=>{
      if(currentRoleIndex >= players.length) return;
      
      if(nextRoleBtn.textContent === 'ç¢ºèªã™ã‚‹') {
         const name = players[currentRoleIndex]; const r = roles[currentRoleIndex];
         roleText.innerHTML = `<span style="font-size:1rem">${name}ã•ã‚“ã®å½¹è·ã¯...</span><br><br><strong style="font-size:2rem; color:#E91E63">${r}</strong>`;
         nextRoleBtn.textContent = 'éš ã—ã¦æ¬¡ã®äººã¸';
      } else {
         currentRoleIndex++;
         if(currentRoleIndex >= players.length){
             roleText.textContent = 'å…¨å“¡ç¢ºèªã—ã¾ã—ãŸï¼';
             nextRoleBtn.style.display='none';
             doneRolesBtn.style.display='inline-flex';
         } else {
             roleText.textContent = 'æ¬¡ã®äººã«æ¸¡ã—ã¦ãã ã•ã„';
             nextRoleBtn.textContent = 'ç¢ºèªã™ã‚‹';
         }
      }
    });

    doneRolesBtn.addEventListener('click', ()=>{ roleDisplay.style.display='none'; votingArea.style.display='block'; alert('ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆï¼åˆ¶é™æ™‚é–“ã‚’æ±ºã‚ã¦è‡ªå·±ç´¹ä»‹ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ã€‚'); });

    function prepareVoting(){ voteControls.innerHTML=''; const select = document.createElement('select'); select.style.padding='10px'; select.style.borderRadius='10px'; select.style.border='2px solid #ddd'; select.style.flex='1'; players.forEach(p=>{ const o=document.createElement('option'); o.value=p; o.textContent=p; select.appendChild(o); }); const voteBtn=document.createElement('button'); voteBtn.className='btn btn-primary'; voteBtn.textContent='æŠ•ç¥¨ï¼'; voteBtn.addEventListener('click', ()=>{ alert('æŠ•ç¥¨æ©Ÿèƒ½ã¯ãƒ‡ãƒ¢ç‰ˆã®ãŸã‚ã“ã“ã¾ã§ã§ã™ã€‚æŒ‡å·®ã—ã§æŠ•ç¥¨ã—ã¾ã—ã‚‡ã†ï¼'); }); voteControls.appendChild(select); voteControls.appendChild(voteBtn); }
  </script>
</body>
</html>