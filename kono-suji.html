<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>ã“ã®æ•°å­—ã©ã‚“ãªæ•°å­—ï¼Ÿ - ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯ã‚²ãƒ¼ãƒ ã²ã‚ã°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    :root {
      --main-color: #66CCFF; --accent-color: #FFC107; --sub-accent: #333366;
      --bg-light: #F0F8FF; --shadow-card: 0 10px 25px rgba(102, 204, 255, 0.15);
    }
    body { margin: 0; font-family: 'M PLUS Rounded 1c', sans-serif; background: var(--bg-light); color: #333; line-height: 1.6; }

    header {
      background: linear-gradient(135deg, #fff, #F0F8FF);
      padding: 30px 20px; text-align: center;
      border-bottom: 4px solid var(--main-color);
      border-bottom-left-radius: 40px; border-bottom-right-radius: 40px;
    }
    .header-icon { width: 80px; height: 80px; object-fit: contain; margin-bottom: 10px; }
    h1 { margin: 10px 0; color: var(--sub-accent); font-weight: 900; }

    main { max-width: 800px; margin: 30px auto; padding: 0 20px 60px; }
    .panel { background: #fff; padding: 30px; border-radius: 20px; box-shadow: var(--shadow-card); margin-bottom: 30px; }
    .panel h2 { color: var(--sub-accent); border-left: 6px solid var(--accent-color); padding-left: 10px; font-size: 1.3rem; }

    .btn { padding: 12px 24px; border-radius: 50px; border: none; font-weight: 900; cursor: pointer; transition: transform 0.2s; font-size: 1rem; }
    .btn-primary { background: linear-gradient(135deg, #FFC107, #FFD54F); color: #333; box-shadow: 0 4px 0 #DDA000; }
    .btn-primary:hover { transform: translateY(2px); box-shadow: 0 2px 0 #DDA000; }
    .btn-secondary { background: #fff; color: var(--main-color); border: 2px solid var(--main-color); }
    
    input { padding: 12px; border: 2px solid #eee; border-radius: 10px; width: 100%; font-size: 1rem; }
    .player-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    .player-table th, .player-table td { padding: 10px; border-bottom: 1px solid #eee; text-align: left; }
    .topic-card { background: #FFF8E1; padding: 20px; border-radius: 15px; border: 3px dashed var(--accent-color); text-align: center; margin-top: 15px; }

    /* ãƒ•ãƒƒã‚¿ãƒ¼ */
    footer {
      text-align: center;
      padding: 40px 20px;
      color: #999;
      font-size: 0.85rem;
      background: var(--sub-accent);
    }
    .footer-logo {
      width: 100px;
      margin-bottom: 10px;
      border-radius: 12px;
    }
  </style>
</head>
<body>
  <header>
    <a href="menu.html" style="display:inline-block; margin-bottom:10px; text-decoration:none; color:var(--sub-accent); font-weight:700;">â—€ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹</a>
    <br>
    <img src="meter.png" alt="ãƒ¡ãƒ¼ã‚¿ãƒ¼" class="header-icon">
    <h1>ã“ã®æ•°å­—ã©ã‚“ãªæ•°å­—ï¼Ÿ</h1>
    <p style="color:var(--text-main); font-weight:700;">æ•°å­—ã§ä¾¡å€¤è¦³ã‚’è¡¨ç¾ï¼</p>
  </header>

  <main>
    <section class="panel">
      <h2>ğŸ”¢ ã“ã®ã‚²ãƒ¼ãƒ ã«ã¤ã„ã¦</h2>
      <p>ãŠé¡Œã«å¯¾ã—ã¦1ã€œ100ã®æ•°å­—ã§è‡ªåˆ†ã®ä¾¡å€¤è¦³ã‚’è¡¨ç¾ã€‚ã€Œãªãœãã®æ•°å­—ï¼Ÿã€ã‹ã‚‰ä¼šè©±ãŒè‡ªç„¶ã«åºƒãŒã‚Šã€ç›¸æ‰‹ã®è€ƒãˆæ–¹ã‚„æ€§æ ¼ã‚’çŸ¥ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
      <p style="margin-top:15px; background:#FFF8E1; padding:10px; border-radius:10px;">
        <strong>ãŠé¡Œä¾‹ï¼š</strong>ã€Œä¸€äººæ™‚é–“ã®å……å®Ÿåº¦ã€ã€Œæ–°ã—ã„ã“ã¨ã«æŒ‘æˆ¦ã™ã‚‹æ„æ¬²ã€ã€Œå¥åº·æ„è­˜ã®é«˜ã•ã€
      </p>
    </section>

    <section class="panel">
      <h2>â‘  äººæ•°ã¨ã‚ã åã‚’ç™»éŒ²</h2>
      <div style="display:flex; gap:10px; align-items:flex-end;">
        <div style="flex:1"><label>äººæ•°</label><input id="player-count" type="number" min="2" max="12" value="4"></div>
        <button id="init-players-btn" class="btn btn-primary">é–‹å§‹</button>
      </div>

      <div id="nickname-area" style="display:none; margin-top:20px; background:#f9f9f9; padding:15px; border-radius:15px;">
        <label>ã‚ã åã‚’è¿½åŠ </label>
        <div style="display:flex; gap:10px; margin-top:5px;">
          <input id="nickname-input" type="text" placeholder="ä¾‹ï¼šã—ã‚‚ã—ã‚…ã‚“">
          <button id="add-nickname-btn" class="btn btn-secondary">ç™»éŒ²</button>
        </div>
      </div>
      <table id="player-table" class="player-table" style="display:none">
        <thead><tr><th>#</th><th>åå‰</th><th>æ•°å­—</th></tr></thead>
        <tbody id="player-tbody"></tbody>
      </table>
    </section>

    <section class="panel">
      <h2>â‘¡ ãŠé¡Œ</h2>
      <div style="text-align:center;">
        <button id="random-topic-btn" class="btn btn-secondary">ãŠé¡Œã‚’å¼•ã</button>
      </div>
      <div id="topic-card" class="topic-card" style="display:none">
        <div id="topic-main" style="font-size:1.5rem; font-weight:900; color:var(--sub-accent);"></div>
        <div id="topic-detail" style="margin-top:10px; color:#666;"></div>
      </div>
    </section>

    <section class="panel">
      <h2>â‘¢ ã‚²ãƒ¼ãƒ é€²è¡Œ</h2>
      <div style="display:flex; gap:10px; justify-content:center;">
        <button id="assign-numbers-btn" class="btn btn-primary" disabled>æ•°å­—ã‚’é…ã‚‹</button>
        <button id="shuffle-order-btn" class="btn btn-secondary" disabled>é †ç•ªã‚’æ±ºã‚ã‚‹</button>
      </div>
      <div id="turn-box" style="display:none; margin-top:20px; padding:20px; background:#E3F2FD; border-radius:15px; text-align:center;"></div>
    </section>
  </main>

  <footer>
    <img src="team-logo.png" alt="BigStone ãƒãƒ¼ãƒ ãƒ­ã‚´" class="footer-logo">
    <div style="color:#fff;">Â© 2025 ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯ã‚²ãƒ¼ãƒ ã²ã‚ã° | BigStone</div>
  </footer>

  <script>
    const topics = [
      { main: "å¤–é£Ÿã§ã€ãŠã„ã—ã„ã€ã¨æ„Ÿã˜ã‚‹ãƒ¬ãƒ™ãƒ«", detail: "1ï¼ãƒ•ã‚¡ã‚¹ãƒˆãƒ•ãƒ¼ãƒ‰ã€100ï¼ãƒŸã‚·ãƒ¥ãƒ©ãƒ³ç´š" },
      { main: "ã€ãŠã‚„ã¤ã€ã«æ‰•ã„ãŸã„é‡‘é¡æ„Ÿ", detail: "1ï¼10å††ã€100ï¼é«˜ç´šã‚¹ã‚¤ãƒ¼ãƒ„" },
      { main: "æ—©èµ·ãã®å¾—æ„åº¦ï¼ˆæœå‹åº¦ï¼‰", detail: "1ï¼å…¨ãç„¡ç†ã€100ï¼æ¯æœ4æ™‚èµ·ã" },
      { main: "éƒ¨å±‹ã®ç‰‡ã¥ã‘åº¦", detail: "1ï¼è¶³ã®è¸ã¿å ´ãªã—ã€100ï¼ãƒ¢ãƒ‡ãƒ«ãƒ«ãƒ¼ãƒ " },
      { main: "å¥åº·æ„è­˜ã®é«˜ã•", detail: "1ï¼ç„¡é “ç€ã€100ï¼å¾¹åº•ç®¡ç†" }
    ];

    let players = [], targetCount = 0, numbersAssigned = false, order = [], currentTurnIndex = 0;
    const playerCountInput = document.getElementById("player-count");
    const initPlayersBtn = document.getElementById("init-players-btn");
    const nicknameAreaEl = document.getElementById("nickname-area");
    const nicknameInput = document.getElementById("nickname-input");
    const addNicknameBtn = document.getElementById("add-nickname-btn");
    const playerTableEl = document.getElementById("player-table");
    const playerTbodyEl = document.getElementById("player-tbody");
    const randomTopicBtn = document.getElementById("random-topic-btn");
    const topicCardEl = document.getElementById("topic-card");
    const topicMainEl = document.getElementById("topic-main");
    const topicDetailEl = document.getElementById("topic-detail");
    const assignNumbersBtn = document.getElementById("assign-numbers-btn");
    const shuffleOrderBtn = document.getElementById("shuffle-order-btn");
    const turnBoxEl = document.getElementById("turn-box");

    initPlayersBtn.addEventListener("click", ()=> {
      const c = Number(playerCountInput.value); if(!c||c<2)return alert('2äººä»¥ä¸Šã§ï¼');
      targetCount = c; players=[]; playerTbodyEl.innerHTML=''; nicknameAreaEl.style.display='block'; playerTableEl.style.display='table';
    });

    addNicknameBtn.addEventListener("click", ()=> {
      if(players.length>=targetCount) return alert('ç™»éŒ²å®Œäº†æ¸ˆã¿ã§ã™');
      const nick = nicknameInput.value.trim(); if(!nick)return;
      players.push({nickname:nick, number:null});
      const row = document.createElement("tr");
      row.innerHTML = `<td>${players.length}</td><td>${nick}</td><td>-</td>`;
      playerTbodyEl.appendChild(row); nicknameInput.value='';
      if(players.length===targetCount) assignNumbersBtn.disabled=false;
    });

    randomTopicBtn.addEventListener("click", ()=> {
      const t = topics[Math.floor(Math.random()*topics.length)];
      topicMainEl.textContent=t.main; topicDetailEl.textContent=t.detail; topicCardEl.style.display='block';
    });

    assignNumbersBtn.addEventListener("click", ()=> {
      players.forEach((p,i)=> { const num = Math.floor(Math.random()*100)+1; p.number=num; playerTbodyEl.rows[i].cells[2].textContent=num; });
      numbersAssigned=true; shuffleOrderBtn.disabled=false;
    });

    shuffleOrderBtn.addEventListener("click", ()=> {
      if(!numbersAssigned)return;
      order = [...Array(players.length).keys()].sort(()=>Math.random()-0.5);
      currentTurnIndex=0; showTurn(); turnBoxEl.style.display='block';
    });

    function showTurn(){
      const p = players[order[currentTurnIndex]];
      turnBoxEl.innerHTML = `<h3 style="margin:0">æ¬¡ã¯ ${p.nickname} ã•ã‚“</h3><p style="font-size:1.2rem;font-weight:bold;color:#E91E63">æ•°å­—ï¼š${p.number}</p><p>ã“ã®æ•°å­—ã£ã½ã•ã‚’è¨€è‘‰ã§è¡¨ç¾ã—ã¦ï¼</p><button class="btn btn-secondary" onclick="nextTurn()">æ¬¡ã®äººã¸</button>`;
    }
    window.nextTurn = function(){
      if(currentTurnIndex < order.length-1){ currentTurnIndex++; showTurn(); }
      else { turnBoxEl.innerHTML = '<h3>å…¨å“¡çµ‚äº†ï¼</h3><p>æ•°å­—ã®å¤§å°é †ã«ä¸¦ã¹ã‚‰ã‚ŒãŸã‹ãªï¼Ÿç­”ãˆåˆã‚ã›ã—ã‚ˆã†ï¼</p>'; }
    }
  </script>
</body>
</html>